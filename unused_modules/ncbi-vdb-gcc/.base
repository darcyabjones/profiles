#%Module1.0#####################################################################
##
## $name modulefile
##

set ver [lrange [split [ module-info name ] / ] 1 1 ]
set name [lrange [split [ module-info name ] / ] 0 0 ]
set subname [lrange [split $name - ] 0 0 ]-[lrange [split $name - ] 1 1 ]
set compiler [lrange [split $name - ] 2 2 ]

proc ModulesHelp { } {
  puts stderr "\tThis module sets the envinronment for $name v$ver"
}

module-whatis   "Set environment variables to use $name version $ver"

if { ![ is-loaded $compiler ] } {
  module load $compiler
}
if { ![ is-loaded openmpi ] } {
  module load openmpi-intel/1.8.4
}
if { ![ is-loaded hdf5-intel ] } {
  module load hdf5-intel/1.8.15
}
if { ![ is-loaded ngs-gcc ] } {
  module load ngs-gcc/1.1.3
}

setenv NCBIVDB_HOME /usr/local/$subname/$ver-$compiler

prepend-path INCLUDE $env(NCBIVDB_HOME)/include
prepend-path LD_LIBRARY_PATH $env(NCBIVDB_HOME)/lib64
prepend-path --delim " " LDFLAGS -L$env(NCBIVDB_HOME)/lib64
