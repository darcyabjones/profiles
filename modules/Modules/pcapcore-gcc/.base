#%Module1.0#####################################################################
##
## $name modulefile
##

set ver [lrange [split [ module-info name ] / ] 1 1 ]
set name [lrange [split [ module-info name ] / ] 0 0 ]
set subname [lrange [split $name - ] 0 0 ]
set compiler [lrange [split $name - ] 1 1 ]

proc ModulesHelp { } {
  puts stderr "\tThis module sets the envinronment for $name v$ver"
}

module-whatis   "Set environment variables to use $name version $ver"

if { ![ is-loaded $compiler ] } {
  module load $compiler
}
if { ![ is-loaded boost-intel ] } {
  module load boost-intel
}
if { ![ is-loaded biobambam-intel ] } {
  module load biobambam-intel
}
if { ![ is-loaded openblas-gcc ] } {
  module load openblas-gcc
}
if { ![ is-loaded kentUtils-gcc ] } {
  module load kentUtils-gcc
}
if { ![ is-loaded samtools-intel ] } {
  module load samtools-intel/1.2
}
if { ![ is-loaded bwa-intel ] } {
  module load bwa-intel/0.7.12
}
if { ![ is-loaded perl ] } {
  module load perl
}

setenv PCAPCORE_HOME /usr/local/$subname/$ver-$compiler

prepend-path PATH $env(PCAPCORE_HOME)/bin
prepend-path LD_LIBRARY_PATH $env(PCAPCORE_HOME)/lib
prepend-path MANPATH $env(PCAPCORE_HOME)/share/man
prepend-path MANPATH $env(PCAPCORE_HOME)/man
prepend-path --delim " " CPPFLAGS -I$env(PCAPCORE_HOME)/include
prepend-path PERL5LIB $env(PCAPCORE_HOME)/lib/perl5
prepend-path PERL5LIB $env(PCAPCORE_HOME)/lib/perl5/x86_64-linux-thread-multi-ld
