#%Module1.0#####################################################################
##
## $name modulefile
##

set ver [lrange [split [ module-info name ] / ] 1 1 ]
set name [lrange [split [ module-info name ] / ] 0 0 ]
set subname [lrange [split $name - ] 0 0 ]
set compiler [lrange [split $name - ] 1 1 ]


proc ModulesHelp { } {
   puts stderr "\tThis module sets the envinronment for $name v$ver"
}

module-whatis "Set environment variables to use $name version $ver"

if { ![ is-loaded $compiler ] } {
   module load $compiler
}


prepend-path PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/openmpi-1.6.3/bin
prepend-path PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/scotch_6.0.0/bin
prepend-path PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/bin
prepend-path PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/wmake
prepend-path PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/bin
prepend-path PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/paraview-3.12.0/bin
prepend-path PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/qt-4.7.3/bin
prepend-path PATH ~/OpenFOAM/`whoami`-$ver/platforms/linux64IccDPOpt/bin

#PLEASE NTOE THE DUMMY ONE MUST BE LOADED BEFORE MPI ONE
prepend-path LD_LIBRARY_PATH ~/OpenFOAM/`whoami`-$ver/platforms/linux64IccDPOpt/lib
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib/dummy
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/openmpi-1.6.3/lib
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64IccDPOpt/lib
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib/openmpi-1.6.3
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64IccDPOpt/lib/openmpi-1.6.3
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/paraview-3.12.0/lib/paraview-3.12
prepend-path LD_LIBRARY_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/qt-4.7.3/lib
prepend-path LD_LIBRARY_PATH ~/OpenFOAM/$ver/platforms/linux64GccDPOpt/lib

setenv WM_PROJECT_INST_DIR /usr/local/openfoam/$ver-$compiler
setenv WM_LINK_LANGUAGE c++
setenv WM_ARCH linux64
setenv WM_OSTYPE POSIX
setenv WM_THIRD_PARTY_DIR /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver
setenv WM_CXXFLAGS -m64 -fPIC
setenv WM_CFLAGS -m64 -fPIC
setenv WM_PROJECT_VERSION $ver
setenv WM_COMPILER_LIB_ARCH 64
setenv WM_CXX icpc
setenv WM_PROJECT_DIR /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver
setenv WM_COMPILER_ARCH ""
setenv WM_PROJECT OpenFOAM
setenv WM_LDFLAGS -m64
setenv WM_COMPILER Icc
setenv WM_MPLIB OPENMPI
setenv WM_CC icc
setenv WM_COMPILE_OPTION Opt
setenv WM_DIR /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/wmake
setenv WM_PROJECT_USER_DIR ~/OpenFOAM/$ver
setenv WM_OPTIONS linux64IccDPOpt
setenv WM_PRECISION_OPTION DP
setenv WM_ARCH_OPTION 64

setenv FOAM_SOLVERS /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/applications/solvers
setenv FOAM_APPBIN /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/bin/
setenv FOAM_TUTORIALS /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/tutorials
setenv FOAM_LIB /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib
setenv FOAM_MPI_LIBBIN /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib/openmpi-1.6.3/
setenv FOAM_APP /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/applications
setenv FOAM_SRC /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/src
setenv FOAM_SIGFPE ""
setenv FOAM_UTILITIES /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/applications/utilities
setenv FOAM_INST_DIR /usr/local/openfoam/$ver-$compiler
setenv FOAM_LIBBIN /usr/local/openfoam/$ver-$compiler/OpenFOAM-$ver/platforms/linux64IccDPOpt/lib
setenv FOAM_RUN ~/OpenFOAM/`whoami`-$ver/run
setenv FOAM_USER_APPBIN ~/OpenFOAM/`whoami`-$ver/platforms/linux64IccDPOpt/bin
setenv FOAM_USER_LIBBIN ~/OpenFOAM/`whoami`-$ver/platforms/linux64IccDPOpt/lib

#setenv MPI_HOME /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Gcc/openmpi-1.5.3
#setenv MPI_BUFFER_SIZE 20000000
#setenv ParaView_INST_DIR /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/paraview-3.10.1

setenv OPAL_PREFIX /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/openmpi-1.6.3
setenv MPI_HOME /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/openmpi-1.6.3
setenv MPI_BUFFER_SIZE 20000000
setenv MPI_ARCH_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64IccDPOpt/lib/openmpi-1.6.3
setenv SCOTCH_ARCH_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/scotch_6.0.0
setenv QMAKE_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/build/linux64Icc/qt-everywhere-opensource-src-4.7.3
setenv ParaView_DIR /usr/local/openfoam/2.2.1-intel/ThirdParty-2.2.1/platforms/linux64Icc/paraview-3.12.0
setenv ParaView_INCLUDE_DIR /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/paraview-3.12.0/include/paraview-3.12
setenv PV_PLUGIN_PATH /usr/local/openfoam/$ver-$compiler/ThirdParty-$ver/platforms/linux64Icc/paraview-3.12.0/lib/paraview-3.12
